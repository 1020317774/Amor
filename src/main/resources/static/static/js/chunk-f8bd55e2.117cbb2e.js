(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8bd55e2"],{"063c":function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"a",(function(){return i}));var n=s("b775");function a(t){return Object(n["a"])({url:"/api/comment",method:"post",data:t})}function i(t,e,s){return Object(n["a"])({url:"/comments/user/"+t,method:"get",params:{page:e,size:s}})}},"1cdc8":function(t,e,s){"use strict";var n=s("96a1"),a=s.n(n);a.a},"357b":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("div",{staticClass:"columns is-mobile"},[s("div",{staticClass:"column is-three-quarters"},[s("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[s("div",{staticClass:"has-text-centered",attrs:{slot:"header"},slot:"header"},[s("p",{staticClass:"is-size-5 has-text-weight-bold"},[t._v(t._s(t.topic.title))]),s("div",{staticClass:"has-text-grey is-size-7 mt-3"},[s("span",[t._v(t._s(t.dayjs(t.topic.createTime).format("YYYY/MM/DD HH:mm:ss")))]),s("el-divider",{attrs:{direction:"vertical"}}),s("span",[t._v("发布者："+t._s(t.user.alias))]),s("el-divider",{attrs:{direction:"vertical"}}),s("span",[t._v("查看："+t._s(t.topic.view))]),s("el-divider",{attrs:{direction:"vertical"}}),s("span",[t._v("评论："+t._s(t.topic.comments))])],1)]),s("div",{attrs:{id:"preview"}}),s("nav",{staticClass:"level has-text-grey is-size-7 mt-6"},[s("div",{staticClass:"level-left"},[s("p",{staticClass:"level-item"},[s("b-taglist",t._l(t.tags,(function(e,n){return s("router-link",{key:n,attrs:{to:{name:"tag",params:{name:e.name}}}},[s("b-tag",{attrs:{type:"is-info is-light mr-1"}},[t._v(" "+t._s("#"+e.name)+" ")])],1)})),1)],1)])])]),s("TopicComment",{attrs:{comments:t.comments}})],1),s("div",{staticClass:"column"},[t.flag?s("Author",{attrs:{user:t.user,isFollow:t.isFollow}}):t._e(),t.flag?s("recommend",{attrs:{topicId:t.topic.id}}):t._e()],1)])])},a=[],i=(s("96cf"),s("1da1")),o=s("5530"),c=s("0fac"),r=s("2f62"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{attrs:{id:"author"}},[s("el-card",{attrs:{shadow:"hover"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"has-text-weight-bold"},[t._v("关于作者")])]),s("div",[s("div",{staticClass:"content has-text-centered"},[s("p",{staticClass:"is-size-5"},[s("router-link",{attrs:{to:{path:"/user/"+t.user.username}}},[t._v(" "+t._s(t.user.alias)+" ")])],1)]),s("div",{staticClass:"has-text-centered my-5"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("p",[t._v(t._s(t.user.topicCount))]),s("p",[t._v("文章数")])]),s("div",{staticClass:"column"},[s("p",[t._v(t._s(t.user.commentCount))]),s("p",[t._v("评论数")])]),s("div",{staticClass:"column"},[s("p",[t._v(t._s(t.user.followerCount))]),s("p",[t._v("粉丝数")])])])]),s("div",[t.isFollow?s("button",{staticClass:"button is-success button-center is-fullwidth",on:{click:function(e){return t.handleUnFollow(t.user.id)}}},[t._v(" 已关注 ")]):s("button",{staticClass:"button is-link button-center is-fullwidth",on:{click:function(e){return t.handleFollow(t.user.id)}}},[t._v(" 关注 ")])])])])],1)},u=[],d=s("b775");function m(t){return Object(d["a"])({url:"/follow/"+t,method:"get"})}function f(t){return Object(d["a"])({url:"/unfollow/"+t,method:"get"})}var v={name:"Author",props:{user:Object,isFollow:Boolean},methods:{handleFollow:function(t){var e=this;m(t).then((function(){e.isFollow=!e.isFollow,e.user.followerCount=parseInt(e.user.followerCount)+1}))},handleUnFollow:function(t){var e=this;f(t).then((function(){e.isFollow=!e.isFollow,e.user.followerCount=parseInt(e.user.followerCount)-1}))}}},p=v,h=(s("3f18"),s("2877")),_=Object(h["a"])(p,l,u,!1,null,"1eeb64bc",null),C=_.exports,b=s("063c"),w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("评论 "+t._s(t.comments.length))])]),0===t.comments.length?s("div",[s("p",{staticClass:"has-text-centered my-6"},[t._v("暂无评论，快去抢占沙发~")])]):s("div",t._l(t.comments,(function(e,n){return s("article",{key:n,staticClass:"media"},[s("figure",{staticClass:"media-left"},[s("p",{staticClass:"image is-64x64"},[s("img",{attrs:{src:e.avatar}})])]),s("div",{staticClass:"media-content"},[s("div",{staticClass:"content"},[s("p",[s("strong",[t._v(t._s(e.alias))]),s("br"),t._v(" "+t._s(e.content)+" "),s("br"),s("small",[s("a",[t._v("Like")]),t._v(" · "),s("a",[t._v("Reply")]),t._v(" · "+t._s(t.dayjs(e.createTime).fromNow()))])])])])])})),0),s("article",{staticClass:"media mt-6"},[s("div",{staticClass:"media-content"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control"},[s("textarea",{staticClass:"textarea",attrs:{placeholder:"添加评论……"}})])]),s("nav",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[s("a",{staticClass:"button is-info",on:{click:t.handleComment}},[t._v("Submit")])])])])])])])},g=[],x={name:"TopicComment",props:{comments:Array},computed:Object(o["a"])({},Object(r["b"])(["token"])),data:function(){return{}},created:function(){},methods:{handleComment:function(){if(null==this.token||""===this.token)return alert("登录后评论"),!1;alert("评论成功")}}},k=x,j=Object(h["a"])(k,w,g,!1,null,"55878dea",null),O=j.exports,y=s("ff41"),F=s.n(y),T=(s("2f2f"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{attrs:{id:"recommend"}},[s("el-card",{attrs:{shadow:"hover"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"has-text-weight-bold"},[t._v("随便看看")])]),s("div",t._l(t.recommend,(function(e,n){return s("p",{key:n,staticClass:"content"},[s("router-link",{attrs:{to:{name:"topic-detail",params:{id:e.id}}}},[s("span",{staticClass:"tag"},n<9?[t._v(" 0"+t._s(parseInt(n)+1)+" ")]:[t._v(" "+t._s(parseInt(n)+1)+" ")]),t._v(" "+t._s(e.title)+" ")])],1)})),0)])],1)}),I=[],$={name:"Recommend",props:{topicId:String},data:function(){return{recommend:{}}},created:function(){this.fetchRecommendTopics()},methods:{fetchRecommendTopics:function(){var t=this;Object(c["c"])(this.topicId).then((function(e){var s=e.data;t.recommend=s}))}}},R=$,z=(s("1cdc8"),Object(h["a"])(R,T,I,!1,null,"2f0c652c",null)),E=z.exports,A={name:"TopicDetail",components:{Author:C,Recommend:E,TopicComment:O},computed:Object(o["a"])({},Object(r["b"])(["token"])),data:function(){return{flag:!1,topic:{content:""},tags:[],comments:[],user:{},isFollow:"",comment:{topicId:"",content:"",commentId:""}}},created:function(){this.fetchTopic()},methods:{renderMarkdown:function(t){F.a.preview(document.getElementById("preview"),t)},fetchTopic:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(c["g"])(t.$route.params.id).then((function(e){var s=e.data;t.topic=s.topic,t.tags=s.tags,t.user=s.user,t.comments=s.comments,t.isFollow=s.isFollow,t.renderMarkdown(t.topic.content),t.flag=!0}));case 1:case"end":return e.stop()}}),e)})))()},handleDelete:function(){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){setTimeout((function(){t.$message({type:"success",message:"删除成功!"})}),300)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleComment:function(){this.comment.topicId=this.topic.id,console.log(this.comment),Object(b["b"])(this.comment).then((function(t){console.log(t)}))}}},B=A,D=(s("47b0"),Object(h["a"])(B,n,a,!1,null,"38ff3ab8",null));e["default"]=D.exports},"3f18":function(t,e,s){"use strict";var n=s("4546"),a=s.n(n);a.a},4546:function(t,e,s){},"47b0":function(t,e,s){"use strict";var n=s("7f3d"),a=s.n(n);a.a},"7f3d":function(t,e,s){},"96a1":function(t,e,s){}}]);